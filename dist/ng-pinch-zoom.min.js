/*! angular-pinch-zoom - v0.1.0 */
angular.module("ngPinchZoom",[]).directive("ngPinchZoom",function(){function t(t,e,n){function c(t){k=t.touches[0].clientX,M=t.touches[0].clientY,Y=w,d=X,x=0,D=0}function o(t){""===h&&(1===t.touches.length&&p>1?h="swipe":2===t.touches.length&&(h="pinch",g=p,f=s(t),b=t.touches[0].clientX-parseInt((t.touches[0].clientX-t.touches[1].clientX)/2,10)-e[0].offsetLeft-Y,I=t.touches[0].clientY-parseInt((t.touches[0].clientY-t.touches[1].clientY)/2,10)-e[0].offsetTop-d)),"swipe"===h?(t.preventDefault(),x=t.touches[0].clientX-k,D=t.touches[0].clientY-M,w=Y+x,X=d+D,r()):"pinch"===h&&(t.preventDefault(),l=s(t),m=l/f,p=m*g,w=b*(1-m)+Y+x,X=I*(1-m)+d+D,r())}function i(t){""===h||t.touches.length>0||(1>p?(p=1,w=0,X=0):p>v?(p=v,m=p/g,w=b*(1-m)+Y+x,X=I*(1-m)+d+D):(w>0?w=0:u*(1-p)>w&&(w=u*(1-p)),X>0?X=0:a*(1-p)>X&&(X=a*(1-p))),r(.1),h="")}function s(t){var e=Math.sqrt(Math.pow(t.touches[0].clientX-t.touches[1].clientX,2)+Math.pow(t.touches[0].clientY-t.touches[1].clientY,2));return parseInt(e,10)}function r(t){var n=t?"all cubic-bezier(0,0,.5,1) "+t+"s":"",c=[p,0,0,p,w,X],o="matrix("+c.join(",")+")";e.css({"-webkit-transition":n,transition:n,"-webkit-transform":o+" translate3d(0,0,0)",transform:o})}var u,a,h="",l=0,f=0,p=1,m=1,g=1,v=parseInt(n.maxScale,10);(isNaN(v)||1>=v)&&(v=3);var w=0,X=0,Y=0,d=0,b=0,I=0,k=0,M=0,x=0,D=0,N=new Image;N.onload=function(){u=e[0].clientWidth,a=e[0].clientHeight,e.css({"-webkit-transform-origin":"0 0","transform-origin":"0 0"}),e.on("touchstart",c),e.on("touchmove",o),e.on("touchend",i)},N.src=n.src}var e={restrict:"A",scope:!1,link:t};return e});